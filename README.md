# Лабораторная работа №2: Мини-оболочка (Mini Shell)

## Структура проекта

```

.
├── src/                         # Основной код проекта
│   ├── commands/                # Все команды в отдельных файлах
│   │   ├── __init__.py
│   │   ├── cat_command.py       # Вывод содержимого файла
│   │   ├── cd_command.py        # Изменение текущей директории
│   │   ├── cp_command.py        # Копирование файлов/директорий
│   │   ├── grep_command.py      # Поиск текста в файлах
│   │   ├── ls_command.py        # Список файлов и директорий
│   │   ├── mv_command.py        # Перемещение / переименование
│   │   ├── rm_command.py        # Удаление (с корзиной)
│   │   ├── tar_command.py       # Создание tar.gz архивов
│   │   ├── untar_command.py     # Распаковка tar.gz архивов
│   │   ├── unzip_command.py     # Распаковка zip архивов
│   │   └── zip_command.py       # Создание zip архивов
│   ├── exceptions/              # Пользовательские исключения
│   ├── .history                 # Файл хранения истории
│   ├── history.py               # История команд
│   ├── main.py                  # Точка входа в приложение
│   ├── mini_shell.py            # Основной цикл обработки команд
│   └── shell.log                # Логирование всех действий оболочки
├── tests/                       # Pytest тесты для всех команд
└── README.md                    # Документация проекта

```

## Как использовать:

В папке ~/c1-s1-mini-shell можно прописать:

```
python -m src.main <path>
```

Чтобы завершить работу командной строки можно прописать ``exit`` или ``q``

Изначально текущая директория - C:\Users\svlad\PycharmProjects\c1-s1-mini-shell\src>, но также пользователь может сам
прописать путь с какой директории начать прописав путь после python -m src.main

## Реализованные команды:

### cd:

```
cd <path>
```

Можно указывать как относительные, так и абсолютные пути (.., ., ~, C:\Users\...)

При отсутствии path перемещает в домашнюю директорию

### ls:

```
ls -[l] [<path>] 
```

Может выводить информацию из директории, с флагом -l выводит больше информации

### cat:

```
cat <file>
```
Выводит содержимое текстового файла

### cp

```
cp -[r] <from_path> <to_path> 
```

Копирует файлы и папки.
Без -r не копирует каталоги.
С -r копирует всё содержимое каталогов.

### mv

```
mv <from_path> <to_path>
```
Перемещает или переименовывает файлы и папки.
Если второй аргумент — папка, файл перемещается внутрь.
Если указан новый путь — происходит переименование.

### rm

```
rm -[r] <path> 
```

Удаляет файл или папку.
Без -r не удаляет каталоги.
С -r удаляет и файлы, и папки (с подтверждением y/n).
Удаление системных директорий (./, ../, /) заблокировано.
Удалённые объекты перемещаются в ~/.trash (мягкое удаление).
При удалении ../ текущая директория меняется на ~.

### zip/tar

```
zip <path> <archive_path>
```

```
tar <path> <archive_path>
```

Создают архив .zip или .tar.gz.

### unzip/untar

```
unzip <archive_path>
```

```
untar <archive_path>
```
Распаковывают архив .zip или .tar.gz в текущую директорию.
Если архив не найден — пишет «Архив не найден.».

### grep

```
grep <pattern> <path> =[i] -[r]
```

Ищет строки по шаблону (регулярному выражению) в файле или папке.
Флаг -i — игнорирует регистр,
-r — ищет рекурсивно по всем файлам в папке.

### history

```
history <N>
```

Выводит N последних команд если N не задан то выведет n_commands = 10 последних команд

### Некоторые особенности работы:


- При выполнении undo команды исчезают из истории, если у команды нет реализации undo то ничего не произойдёт 
- Используя команды ls, cp, rm флаг надо указывать после команды, иначе будет ошибка
- При использовании grep флаги можно ставить в любом месте главное чтоб они не были слитно написаны с другими символами